{"version":3,"file":"main.js","mappings":"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","sources":["webpack://ahj-dz10--geolocation-notification-media/./src/index.html","webpack://ahj-dz10--geolocation-notification-media/webpack/bootstrap","webpack://ahj-dz10--geolocation-notification-media/./src/js/app.js","webpack://ahj-dz10--geolocation-notification-media/./src/js/validators.js"],"sourcesContent":["// Module\nvar code = \"<!DOCTYPE html> <html lang=\\\"en\\\"> <head> <meta charset=\\\"UTF-8\\\"> <meta name=\\\"viewport\\\" content=\\\"width=device-width,initial-scale=1\\\"> <meta http-equiv=\\\"X-UA-Compatible\\\" content=\\\"ie=edge\\\"> <title>Document</title> </head> <body> <div class=\\\"block\\\"> <div class=\\\"box-content\\\"> <ul class=\\\"records\\\"> </ul> <form class=\\\"modal\\\" novalidate> <span class=\\\"modal-title\\\">Что-то пошло не так <br></span> <span class=\\\"modal-content\\\">К сожалению, нам не удалось определить ваше местоположение, пожалуста, дайте разрешение на использование геолокации, либо введите координаты вручную.</span> <div class=\\\"geo-modal\\\"> <span class=\\\"geo-title\\\">Широта и долгота через запятую <br></span> <input type=\\\"text\\\" class=\\\"input-modal\\\" name=\\\"input-modal\\\" required pattern=\\\"^\\\\[?(-?[1-8]?\\\\d(?:\\\\.\\\\d{1,18})?|90(?:\\\\.0{1,18})?),(\\\\s?)(-?(?:1[0-7]|[1-9])?\\\\d(?:\\\\.\\\\d{1,18})?|180(?:\\\\.0{1,18})?)\\\\]?$\\\"> <div class=\\\"modal-list-btn\\\"> <button type=\\\"button\\\" class=\\\"btn-cancel\\\">Отмена</button> <button type=\\\"submit\\\" class=\\\"btn-ok\\\">Ок</button> </div> </div> </form> <input type=\\\"text\\\" class=\\\"input\\\" name=\\\"input\\\" placeholder=\\\"Введите пост (не менее 3х символов)\\\"> </div> </div> </body> </html> \";\n// Exports\nmodule.exports = code;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/* eslint-disable no-unused-vars */\nimport isValidInn from './validators';\n\nconst input = document.querySelector('.input');\nconst records = document.querySelector('.records');\n\nclass InnTimelineWidget {\n  constructor() {\n    this.input = input;\n    this.records = records;\n\n    this.onSubmitPost = this.onSubmitPost.bind(this);\n    this.btnModalOkClick = this.btnModalOkClick.bind(this);\n    this.onSubmitPostAfterModal = this.onSubmitPostAfterModal.bind(this);\n    this.arrGeo = null;\n  }\n\n  geolocation() {\n    navigator.geolocation.getCurrentPosition(\n      (data) => { // выполняется если включена геолокация\n        this.latitude = data.coords.latitude;\n        this.longitude = data.coords.longitude;\n        this.input.addEventListener('keydown', this.onSubmitPost); // обработка по нажатию на Enter в инпуте добавления поста\n      },\n\n      (err) => { // выполняется если геолокация неактивна\n        this.input.style.background = '#f1090921';\n        this.input.readOnly = true;\n        this.modal = document.querySelector('.modal');\n        this.modal.style.display = 'block'; // появление модального окна\n\n        this.btnModalCancelClick(); // выполняется при клике на кнопку \"Отмена\" модального кона\n        this.btnModalOkClick(); // обработка кнопки \"Ок\" модального окна\n        this.input.addEventListener('keydown', this.onSubmitPostAfterModal); // выполняется после нажатия на Enter в инпуте добалвения поста после нажатия кнопки \"Ок\" модального окна\n      },\n\n      { enableHighAccuracy: true },\n    );\n  }\n\n  onSubmitPost(e) {\n    this.recordsItem = document.querySelectorAll('.records-item');\n    if (e.keyCode === 13 && this.recordsItem.length === 0 && this.input.value.length > 2) {\n      records.insertAdjacentHTML('afterBegin', `\n          <li class=\"records-item\">\n            <div class=\"line1\">\n              <div class=\"records-item-content\">${this.input.value}</div>\n            <div class=\"records-item-time\">${new Date().toLocaleString().slice(0, -3)}</div>\n            </div>\n            <div class=\"geolocation\">${`${this.latitude}, -${this.longitude}`}</div>\n          </li>`);\n      this.input.value = '';\n    } else if (e.keyCode === 13 && this.recordsItem.length !== 0 && this.input.value.length > 2) {\n      records.insertAdjacentHTML('afterBegin', `\n          <li class=\"records-item\">\n            <div class=\"line1\">\n              <div class=\"records-item-content\">${this.input.value}</div>\n              <div class=\"records-item-time\">${new Date().toLocaleString().slice(0, -3)}</div>\n            </div>\n            <div class=\"geolocation\">${`${this.latitude}, -${this.longitude}`}</div>\n          </li>`);\n      this.input.value = '';\n    }\n  }\n\n  btnModalCancelClick() {\n    this.btnCancel = document.querySelector('.btn-cancel');\n    this.btnCancel.addEventListener('click', () => {\n      this.modal.style.display = 'none';\n      this.input.placeholder = 'Включите геолокацию и обновите страницу!';\n    });\n  }\n\n  btnModalOkClick() {\n    this.inputModal = document.querySelector('.input-modal');\n    this.arrGeo = [];\n    this.modal.addEventListener('submit', (e) => {\n      e.preventDefault();\n      if (isValidInn(this.inputModal.value)) {\n        this.modal.style.display = 'none';\n        this.input.style.background = 'none';\n        this.input.readOnly = false;\n        this.inputModal.value = this.inputModal.value.replace(/[^0-9,.-]/g, ' ');\n        this.inputModal.value = this.inputModal.value.replace(/\\s{2,}/g, ' ').replace(/([,]+)(?=\\S)/g, '$1 ');\n        this.arrGeo.push(this.inputModal.value);\n      } else {\n        this.modal.reportValidity();\n      }\n    });\n  }\n\n  onSubmitPostAfterModal(e) {\n    this.recordsItem = document.querySelectorAll('.records-item');\n    if (e.keyCode === 13 && this.recordsItem.length === 0 && this.input.value.length > 2) {\n      this.records.insertAdjacentHTML('afterBegin', `\n          <li class=\"records-item\">\n            <div class=\"line1\">\n              <div class=\"records-item-content\">${this.input.value}</div>\n              <div class=\"records-item-time\">${new Date().toLocaleString().slice(0, -3)}</div>\n            </div>\n            <div class=\"geolocation\">${this.arrGeo}</div>\n          </li>`);\n      this.input.value = '';\n    } else if (e.keyCode === 13 && this.recordsItem.length !== 0 && this.input.value.length > 2) {\n      this.records.insertAdjacentHTML('afterBegin', `\n          <li class=\"records-item\">\n            <div class=\"line1\">\n              <div class=\"records-item-content\">${this.input.value}</div>\n              <div class=\"records-item-time\">${new Date().toLocaleString().slice(0, -3)}</div>\n            </div>\n            <div class=\"geolocation\">${this.arrGeo[this.arrGeo.length - 1]}</div>\n          </li>`);\n      this.input.value = '';\n    }\n  }\n}\n\nconst eksOne = new InnTimelineWidget();\neksOne.geolocation();\n","export default function isValidInn(value) {\n  // console.log('валидатор тут')\n  return /^\\[?(-?[1-8]?\\d(?:\\.\\d{1,18})?|90(?:\\.0{1,18})?),(\\s?)(-?(?:1[0-7]|[1-9])?\\d(?:\\.\\d{1,18})?|180(?:\\.0{1,18})?)\\]?$/.test(value);\n}\n"],"names":["module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","input","document","querySelector","records","constructor","this","onSubmitPost","bind","btnModalOkClick","onSubmitPostAfterModal","arrGeo","geolocation","navigator","getCurrentPosition","data","latitude","coords","longitude","addEventListener","err","style","background","readOnly","modal","display","btnModalCancelClick","enableHighAccuracy","e","recordsItem","querySelectorAll","keyCode","length","value","insertAdjacentHTML","Date","toLocaleString","slice","btnCancel","placeholder","inputModal","preventDefault","test","replace","push","reportValidity"],"sourceRoot":""}